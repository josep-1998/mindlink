<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MindLink – Full Version</title>

<style>

:root{
  --bg:#07070a;
  --panel:#0f1114;
  --text:#eef2f3;
  --accent:#00d1ff;
  --accent2:#8a4cff;
}

* { box-sizing: border-box; font-family: Arial, sans-serif; }
body{
  background:var(--bg);
  color:var(--text);
  margin:0;
  padding:20px;
  display:flex;
  justify-content:center;
}

.app{
  width:100%;
  max-width:400px;
  text-align:center;
}

h1{
  color:var(--accent);
  margin-bottom:10px;
}

button{
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  border:none;
  padding:12px 25px;
  color:white;
  border-radius:8px;
  font-size:18px;
  cursor:pointer;
  margin-bottom:20px;
}

#board{
  width:300px;
  height:300px;
  margin:0 auto;
  display:grid;
  grid-template-columns:repeat(2,1fr);
  grid-template-rows:repeat(2,1fr);
  gap:10px;
}

.pad{
  border-radius:12px;
  background:#222;
  border:2px solid var(--accent2);
  transition:0.2s;
}

.pad.glow{
  transform:scale(1.06);
  box-shadow:0 0 20px var(--accent);
  background:var(--accent2);
}

</style>
</head>

<body>
<div class="app">
  <h1>MindLink</h1>
  <p>Ronda: <span id="ronda">-</span></p>
  <button id="startGame">Jugar</button>

  <div id="board">
    <div class="pad" data-id="0"></div>
    <div class="pad" data-id="1"></div>
    <div class="pad" data-id="2"></div>
    <div class="pad" data-id="3"></div>
  </div>
</div>

<script>
let secuencia = [];
let jugador = [];
let ronda = 0;
let bloqueando = false;

const sonidos = [
    new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"),
    new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"),
    new Audio("https://actions.google.com/sounds/v1/cartoon/pop.ogg"),
    new Audio("https://actions.google.com/sounds/v1/cartoon/metal_twang.ogg")
];

function pad(i){ return document.querySelector(`[data-id="${i}"]`); }

function iluminar(i){
  return new Promise((resolve)=>{
      const p = pad(i);
      p.classList.add("glow");
      sonidos[i].play();
      setTimeout(()=>{
          p.classList.remove("glow");
          setTimeout(resolve,150);
      },600);
  });
}

async function reproducirSecuencia(){
  bloqueando = true;
  for(let i of secuencia){
    await iluminar(i);
  }
  bloqueando = false;
}

function nuevaRonda(){
  jugador = [];
  ronda++;
  document.getElementById("ronda").textContent = ronda;
  secuencia.push(Math.floor(Math.random()*4));
  reproducirSecuencia();
}

function clickPad(e){
  if(bloqueando) return;
  const id = Number(e.target.dataset.id);
  jugador.push(id);
  iluminar(id);

  if(jugador[jugador.length-1] !== secuencia[jugador.length-1]){
      alert("❌ Fallaste. Pulsa Jugar para reiniciar.");
      reiniciar();
      return;
  }

  if(jugador.length === secuencia.length){
      setTimeout(nuevaRonda,700);
  }
}

function reiniciar(){
  secuencia = [];
  jugador = [];
  ronda = 0;
  document.getElementById("ronda").textContent = "-";
}

function startGame(){
  reiniciar();
  nuevaRonda();
}

document.getElementById("startGame").addEventListener("click", startGame);
document.querySelectorAll(".pad").forEach(p=>p.addEventListener("click", clickPad));
</script>

</body>
</html>
